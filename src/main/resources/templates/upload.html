<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>登录</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <!-- jquery -->
    <script type="text/javascript" th:src="@{/static/js/jquery.min.js}"></script>
    <!-- bootstrap -->
    <link rel="stylesheet" type="text/css" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
    <script type="text/javascript" th:src="@{/static/bootstrap/js/bootstrap.min.js}"></script>
    <!-- jquery-validator -->
    <script type="text/javascript" th:src="@{/static/jquery-validation/jquery.validate.min.js}"></script>
    <script type="text/javascript" th:src="@{/static/jquery-validation/localization/messages_zh.min.js}"></script>
    <!-- layer -->
    <script type="text/javascript" th:src="@{/static/layer/layer.js}"></script>
    <!-- md5.js -->
    <script type="text/javascript" th:src="@{/static/js/md5.min.js}"></script>
    <!-- common.js -->
    <script type="text/javascript" th:src="@{/static/js/common.js}"></script>

    <link rel="stylesheet" type="text/css" th:href="@{/static/bootstrap/jQueryFileUpload/css/style.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/static/bootstrap/jQueryFileUpload/css/jquery.fileupload.css}"/>
    <script type="text/javascript" th:src="@{/static/bootstrap/jQueryFileUpload/js/load-image.all.min.js}"></script>
    <script type="text/javascript" th:src="@{/static/bootstrap/jQueryFileUpload/js/canvas-to-blob.js}"></script>
    <script
            type="text/javascript"
            th:src="@{/static/bootstrap/jQueryFileUpload/js/vendor/jquery.ui.widget.js}"></script>
    <script
            type="text/javascript"
            th:src="@{/static/bootstrap/jQueryFileUpload/js/jquery.iframe-transport.js}"></script>
    <script type="text/javascript" th:src="@{/static/bootstrap/jQueryFileUpload/js/jquery.fileupload.js}"></script>
    <script
            type="text/javascript"
            th:src="@{/static/bootstrap/jQueryFileUpload/js/jquery.fileupload-process.js}"></script>
    <script
            type="text/javascript"
            th:src="@{/static/bootstrap/jQueryFileUpload/js/jquery.fileupload-image.js}"></script>
    <script
            type="text/javascript"
            th:src="@{/static/bootstrap/jQueryFileUpload/js/jquery.fileupload-audio.js}"></script>
    <script
            type="text/javascript"
            th:src="@{/static/bootstrap/jQueryFileUpload/js/jquery.fileupload-validate.js}"></script>

</head>
<body>

<form action="/doUpload" name="uploadForm" id="uploadForm" enctype="multipart/form-data" method="post" style="width:50%; margin:0 auto">

    <h2 style="text-align:center; margin-bottom: 20px">用户上传</h2>

    <div class="form-group">
        <div class="row">
            <label class="form-label col-md-4">请上传图片</label>
            <div class="col-md-5">
                <input id="uploadFile" name="file" class="form-control" type="file" placeholder="上传文件" required="true"/>
            </div>
            <div class="col-md-1">
            </div>
        </div>
    </div>


    <table class="table table-striped table-advance table-hover" id="filesDiv">
        <thead>
        <tr>
            <th><i class="fa fa-bullhorn"></i> ID</th>
            <th><i class="fa fa-bullhorn"></i> 文件名称</th>
            <th><i class="fa fa-bookmark"></i> 图片服务器地址</th>
            <th><i class="fa fa-bookmark"></i> 操作</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <!--<div class="form-group">-->
    <!--<div class="row">-->
    <!--<label class="form-label col-md-4">请输入密码</label>-->
    <!--<div class="col-md-5">-->
    <!--<input id="password" name="password" class="form-control" type="password" placeholder="密码"-->
    <!--required="true" minlength="6" maxlength="16"/>-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>-->

    <div class="row">
        <div class="col-md-5">
            <button class="btn btn-primary btn-block" type="reset" onclick="reset()">重置</button>
        </div>
        <div class="col-md-5">
            <!--<button class="btn btn-primary btn-block" type="submit" onclick="doUpload()">提交</button>-->
            <button class="btn btn-primary btn-block" type="submit">提交</button>
        </div>
    </div>

</form>
</body>
<script>

    function doUpload() {
        // g_showLoading();

        //图片上传: PC端
        $('#uploadFile').fileupload({

            url: 'doUpload',
            dataType: 'json',
            // acceptFileTypes: /(\.|\/)(gif|jpe?g|png|pdf)$/i,
            maxFileSize: 5000000,
            done: function (e, data) {
                // $('#filesDiv').show();
                // var obj = data.result.result;
                // var url=obj.fileURL, name=obj.fileName, id=obj.id;
                // var newRowContent = "<tr id="+id+">"
                //     + "<td class='idValue'>"+id+"</td>"
                //     + "<td>"+name+"</td>"
                //     + "<td><a href='"+url+"' target='_blank'>"+url+"</a></td>"
                //     + "<td><a href='javascript:deleTr("+id+");'>删除</a></td>"
                //     + "</tr>";
                // $('#filesDiv tbody').append(newRowContent);
            }
        });

        // $.ajax({
        //     url: "/doUpload",
        //     type: "POST",
        //     data: new FormData(document.getElementsByName('uploadForm')[0]),
        //     processData: false,
        //     contentType: false,
        //     success: function (data) {
        //         layer.closeAll();
        //         if (data.code == 0) {
        //             layer.msg("成功");
        //         } else {
        //             layer.msg(data.msg);
        //         }
        //     },
        //     error: function () {
        //         layer.closeAll();
        //     }
        // });
    }
</script>
</html>